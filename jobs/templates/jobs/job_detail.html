{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2>{{ job.title }}</h2>
    <p><strong>Company:</strong> {{ job.employer.company_name|default:"N/A" }}</p>
    <p><strong>Location:</strong> {{ job.location }}</p>

    <h4>Description</h4>
    <p>{{ job.description }}</p>

    <a href="{% url 'jobs:job_list' %}" class="btn btn-secondary mt-3">
        Back to Jobs
    </a>

    {% if request.user.is_authenticated and is_employee %}
        {% if has_applied %}
            <button class="btn btn-success mt-2" disabled>
                Already Applied
            </button>
        {% else %}
            <form method="post" action="{% url 'jobs:apply_job' job.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary mt-2">
                    Apply Now
                </button>
            </form>
        {% endif %}
    {% elif request.user.is_authenticated %}
        <p class="text-muted mt-2">
            Only job seekers can apply for jobs.
        </p>
    {% endif %}
</div>
{% endblock %}
